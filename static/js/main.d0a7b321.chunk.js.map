{"version":3,"sources":["context/user-context.js","components/Button/Button.js","components/Container/Container.js","components/Home/Home.js","components/ContentContainer/ContentContainer.js","constants/api.js","hooks/useFetch.js","utils/formValidation.js","components/Alert/Alert.js","components/Input/Input.js","components/Form/Form.js","components/LoginPage/LoginPage.js","components/Nav/Nav.js","components/PrivateRoute/PrivateRoute.js","components/Profile/Profile.js","components/Footer/Footer.js","components/RegistrationPage/RegistrationPage.js","App.js","index.js"],"names":["UserContext","React","createContext","UserProvider","children","useState","user","setUser","userDetails","setUserDetails","value","isLoggedIn","setIsLoggedIn","Provider","Button","title","to","history","useHistory","className","onClick","push","Container","Home","useContext","handleLogout","a","fetch","method","headers","credentials","then","res","json","data","catch","e","console","log","ok","ContentContainer","API_BASE_URL","FetchOptions","body","this","fetchOptions","useFetch","setData","url","setUrl","getOptions","options","setOptions","error","setError","isLoading","setIsLoading","cache","useRef","useEffect","current","response","message","fetchData","formValidation","email","password","repeatPassword","formType","alerts","test","type","validateEmail","validatePassword","validatePasswordRepeat","forEach","validation","Alert","Input","handleOnChange","name","warning","warningClass","Boolean","onChange","Form","callback","inputValues","setInputValues","setAlerts","login","location","useLocation","preventDefault","target","prevState","handleSubmit","Object","keys","length","validationAlerts","JSON","stringify","undefined","URL","pathname","onSubmit","noValidate","lastName","LoginPage","Nav","PrivateRoute","Component","component","rest","render","Profile","getUserDetails","role","Footer","RegistartionPage","registered","setRegistered","App","basename","process","exact","path","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d0a7b321.chunk.js","sourcesContent":["import React, { useState } from 'react';\r\n\r\nexport const UserContext = React.createContext();\r\n\r\nconst UserProvider = ({ children }) => {\r\n\tconst [user, setUser] = useState(null);\r\n\tconst [userDetails, setUserDetails] = useState(null);\r\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n\tconst value = { user, setUser, isLoggedIn, setIsLoggedIn, userDetails, setUserDetails };\r\n\r\n\treturn <UserContext.Provider value={value}>{children}</UserContext.Provider>;\r\n};\r\n\r\nexport default UserProvider;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router';\r\n\r\nimport './Button.scss';\r\n\r\nconst Button = ({ title, to }) => {\r\n\tconst history = useHistory();\r\n\r\n\treturn (\r\n\t\t<button className='button' onClick={() => history.push(to)}>\r\n\t\t\t{title}\r\n\t\t</button>\r\n\t);\r\n};\r\n\r\nexport default Button;\r\n","import React from 'react';\r\n\r\nimport './Container.scss';\r\n\r\nconst Container = ({ children }) => {\r\n\treturn <main className='container'>{children}</main>;\r\n};\r\n\r\nexport default Container;\r\n","import React, { useContext } from 'react';\r\nimport { UserContext } from '../../context/user-context';\r\nimport Button from '../Button/Button';\r\nimport Container from '../Container/Container';\r\n\r\nimport './Home.scss';\r\n\r\nconst Home = () => {\r\n\tconst { isLoggedIn, setIsLoggedIn, setUser } = useContext(UserContext);\r\n\r\n\tconst handleLogout = async () => {\r\n\t\tconst data = await fetch('http://localhost:3000/auth/logout', {\r\n\t\t\tmethod: 'GET',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t\tcredentials: 'include',\r\n\t\t})\r\n\t\t\t.then((res) => res.json())\r\n\t\t\t.then((data) => data)\r\n\t\t\t.catch((e) => console.log(e));\r\n\r\n\t\tif (data.ok) {\r\n\t\t\tsetIsLoggedIn(false);\r\n\t\t\tsetUser(null);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div className='home'>\r\n\t\t\t\t<div className='home__container'>\r\n\t\t\t\t\t<h2 className='home__container__title'>\r\n\t\t\t\t\t\t{!isLoggedIn ? 'Sign in' : 'Already signed in'}\r\n\t\t\t\t\t</h2>\r\n\t\t\t\t\t{!isLoggedIn ? (\r\n\t\t\t\t\t\t<Button title='sign in' to='login' />\r\n\t\t\t\t\t) : (\r\n\t\t\t\t\t\t<button className='button' onClick={() => handleLogout()}>\r\n\t\t\t\t\t\t\tlog out\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className='home__container'>\r\n\t\t\t\t\t<h2 className='home__container__title'>Don't have an account?</h2>\r\n\t\t\t\t\t<Button title='register' to='register' />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default Home;\r\n","import React from 'react';\r\n\r\nimport './ContentContainer.scss';\r\n\r\nconst ContentContainer = ({ children }) => {\r\n\treturn <div className='content-container'>{children}</div>;\r\n};\r\n\r\nexport default ContentContainer;\r\n","export const API_BASE_URL = 'http://localhost:3000/';\r\n\r\nexport class FetchOptions {\r\n\tconstructor(\r\n\t\tmethod = 'GET',\r\n\t\theaders = { 'Content-Type': 'application/json' },\r\n\t\tcredentials = 'include',\r\n\t\tbody = null\r\n\t) {\r\n\t\tthis.method = method;\r\n\t\tthis.headers = headers;\r\n\t\tthis.credentials = credentials;\r\n\t\tthis.body = body;\r\n\t}\r\n\r\n\tgetOptions() {\r\n\t\treturn {\r\n\t\t\tmethod: this.method,\r\n\t\t\theaders: this.headers,\r\n\t\t\tcredentials: this.credentials,\r\n\t\t\tbody: this.body,\r\n\t\t};\r\n\t}\r\n}\r\n","import { useEffect, useRef, useState } from 'react';\r\nimport { FetchOptions } from '../constants/api';\r\n\r\nconst fetchOptions = new FetchOptions();\r\n\r\nexport const useFetch = () => {\r\n\tconst [data, setData] = useState(null);\r\n\tconst [url, setUrl] = useState(null);\r\n\tconst [options, setOptions] = useState(fetchOptions.getOptions());\r\n\tconst [error, setError] = useState(null);\r\n\tconst [isLoading, setIsLoading] = useState(false);\r\n\r\n\tconst cache = useRef({});\r\n\t// const cancel = useRef(false);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (!url) return;\r\n\r\n\t\tconst fetchData = async () => {\r\n\t\t\tsetIsLoading(true);\r\n\r\n\t\t\tif (cache.current[url]) return;\r\n\r\n\t\t\ttry {\r\n\t\t\t\tconst response = await fetch(url, options);\r\n\t\t\t\tconst data = await response.json();\r\n\r\n\t\t\t\tconsole.log('DATA', data);\r\n\r\n\t\t\t\tif (data.ok) {\r\n\t\t\t\t\tcache.current[url] = data;\r\n\t\t\t\t\tsetData(data);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetError(data.message);\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tsetError(e.message);\r\n\t\t\t}\r\n\r\n\t\t\tsetIsLoading(false);\r\n\t\t};\r\n\r\n\t\tfetchData();\r\n\t}, [url, options]);\r\n\r\n\tconst setFetch = (url, options) => {\r\n\t\tsetUrl(url);\r\n\r\n\t\tif (options) {\r\n\t\t\tsetOptions(options);\r\n\t\t}\r\n\t};\r\n\r\n\treturn [{ data, isLoading, error }, setFetch];\r\n};\r\n","const validateEmail = (email) => {\r\n\tlet message = '';\r\n\r\n\tif (!email) {\r\n\t\tmessage = 'Insert email';\r\n\t} else if (!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i.test(email)) {\r\n\t\tmessage = 'Invalid email address';\r\n\t}\r\n\r\n\treturn { message, type: 'email' };\r\n};\r\n\r\nconst validatePassword = (password) => {\r\n\tlet message = '';\r\n\r\n\tif (!password) {\r\n\t\tmessage = 'Insert password';\r\n\t}\r\n\r\n\treturn { message, type: 'password' };\r\n};\r\n\r\nconst validatePasswordRepeat = (password, repeatPassword) => {\r\n\tlet message = '';\r\n\r\n\tif (!repeatPassword) {\r\n\t\tmessage = 'Repeat password';\r\n\t} else if (password !== repeatPassword) {\r\n\t\tmessage = 'Passwords must be the same';\r\n\t}\r\n\r\n\treturn { message, type: 'repeatPassword' };\r\n};\r\n\r\nexport const formValidation = (email, password, repeatPassword, formType) => {\r\n\tconst alerts = {};\r\n\r\n\tconst emailValidation = validateEmail(email);\r\n\tconst passwordValidation = validatePassword(password);\r\n\tconst repeatPasswordValidation =\r\n\t\tformType === 'register' ? validatePasswordRepeat(password, repeatPassword) : null;\r\n\r\n\tconst validationArray = [emailValidation, passwordValidation, repeatPasswordValidation];\r\n\r\n\tvalidationArray.forEach((validation) =>\r\n\t\tvalidation && validation.message ? (alerts[validation.type] = validation.message) : null\r\n\t);\r\n\r\n\treturn alerts;\r\n};\r\n","import React from 'react';\r\n\r\nimport './Alert.scss';\r\n\r\nconst Alert = ({ message }) => {\r\n\treturn (\r\n\t\t<div className='alert'>\r\n\t\t\t<p className='alert__message'>{message}</p>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Alert;\r\n","import React from 'react';\r\nimport Alert from '../Alert/Alert';\r\n\r\nimport './Input.scss';\r\n\r\nconst Input = ({ handleOnChange, value, type, name, title, warning }) => {\r\n\tconst warningClass = Boolean(warning) ? 'input--warning' : '';\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className='input__container'>\r\n\t\t\t\t<label className='label'>{title || name}</label>\r\n\t\t\t\t<input\r\n\t\t\t\t\tclassName={`input ${warningClass}`}\r\n\t\t\t\t\tonChange={(e) => handleOnChange(e)}\r\n\t\t\t\t\tvalue={value || ''}\r\n\t\t\t\t\ttype={type}\r\n\t\t\t\t\tname={name}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t{Boolean(warning) && <Alert message={warning} />}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Input;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router';\r\nimport { API_BASE_URL, FetchOptions } from '../../constants/api';\r\nimport { UserContext } from '../../context/user-context';\r\nimport { useFetch } from '../../hooks/useFetch';\r\nimport { formValidation } from '../../utils/formValidation';\r\n\r\nimport Alert from '../Alert/Alert';\r\nimport Input from '../Input/Input';\r\n\r\nimport './Form.scss';\r\n\r\nconst Form = ({ type, callback }) => {\r\n\tconst [inputValues, setInputValues] = useState({});\r\n\tconst [alerts, setAlerts] = useState({});\r\n\r\n\tconst [{ data, isLoading, error }, login] = useFetch();\r\n\r\n\tconst location = useLocation();\r\n\r\n\tconst { setUser, setIsLoggedIn } = useContext(UserContext);\r\n\r\n\tconst handleOnChange = (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst { value, name } = e.target;\r\n\r\n\t\tsetInputValues((prevState) => ({ ...prevState, [name]: value }));\r\n\t};\r\n\r\n\tconst handleSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst { email, password, repeatPassword } = inputValues;\r\n\r\n\t\tif (!Boolean(Object.keys(inputValues).length)) {\r\n\t\t\tsetAlerts({ message: 'Fill up form before submit' });\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst validationAlerts = formValidation(email, password, repeatPassword, type);\r\n\r\n\t\tif (Boolean(Object.keys(validationAlerts).length)) {\r\n\t\t\tsetAlerts(validationAlerts);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst body = JSON.stringify(inputValues);\r\n\r\n\t\tconst fetchOptions = new FetchOptions('POST', undefined, undefined, body);\r\n\r\n\t\tconst URL =\r\n\t\t\ttype === 'register'\r\n\t\t\t\t? `${API_BASE_URL}user${location.pathname}`\r\n\t\t\t\t: `${API_BASE_URL}auth${location.pathname}`;\r\n\r\n\t\tlogin(URL, fetchOptions);\r\n\t};\r\n\tconsole.log(data);\r\n\r\n\tuseEffect(() => {\r\n\t\tif (data?.user) {\r\n\t\t\tsetUser(data.user);\r\n\t\t\tsetIsLoggedIn(true);\r\n\t\t}\r\n\r\n\t\tif (callback && data?.ok) {\r\n\t\t\tcallback(true);\r\n\t\t}\r\n\r\n\t\tif (error) {\r\n\t\t\tsetAlerts({ message: error });\r\n\t\t}\r\n\t}, [data, callback, error, setIsLoggedIn, setUser]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<form className='form' onSubmit={(e) => handleSubmit(e)} noValidate>\r\n\t\t\t\t<Input\r\n\t\t\t\t\thandleOnChange={handleOnChange}\r\n\t\t\t\t\tvalue={inputValues.email || ''}\r\n\t\t\t\t\ttype='email'\r\n\t\t\t\t\tname='email'\r\n\t\t\t\t\twarning={alerts.email || ''}\r\n\t\t\t\t/>\r\n\t\t\t\t<Input\r\n\t\t\t\t\thandleOnChange={handleOnChange}\r\n\t\t\t\t\tvalue={inputValues.password || ''}\r\n\t\t\t\t\ttype='password'\r\n\t\t\t\t\tname='password'\r\n\t\t\t\t\twarning={alerts.password || ''}\r\n\t\t\t\t/>\r\n\t\t\t\t{type === 'register' ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\thandleOnChange={handleOnChange}\r\n\t\t\t\t\t\t\tvalue={inputValues.repeatPassword || ''}\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\tname='repeatPassword'\r\n\t\t\t\t\t\t\ttitle='repeat password'\r\n\t\t\t\t\t\t\twarning={alerts.repeatPassword || ''}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\thandleOnChange={handleOnChange}\r\n\t\t\t\t\t\t\tvalue={inputValues.name || ''}\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tname='name'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\thandleOnChange={handleOnChange}\r\n\t\t\t\t\t\t\tvalue={inputValues.lastName || ''}\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tname='lastName'\r\n\t\t\t\t\t\t\ttitle='last name'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : null}\r\n\t\t\t\t<button className='form__button' type='submit'>\r\n\t\t\t\t\t{type === 'register' ? 'Register' : 'Log In'}\r\n\t\t\t\t</button>\r\n\t\t\t</form>\r\n\t\t\t{Boolean(alerts.message) && <Alert message={alerts.message} />}\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Form;\r\n","import React, { useContext } from 'react';\r\nimport { Redirect } from 'react-router';\r\nimport { UserContext } from '../../context/user-context';\r\nimport Button from '../Button/Button';\r\nimport Container from '../Container/Container';\r\nimport ContentContainer from '../ContentContainer/ContentContainer';\r\nimport Form from '../Form/Form';\r\n\r\nimport './LoginPage.scss';\r\n\r\nconst LoginPage = () => {\r\n\tconst { isLoggedIn } = useContext(UserContext);\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t{isLoggedIn && <Redirect to='/profile' />}\r\n\t\t\t<ContentContainer>\r\n\t\t\t\t<h1>Log in</h1>\r\n\t\t\t\t<Form />\r\n\t\t\t</ContentContainer>\r\n\t\t\t<Button title='home' to='/' />\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default LoginPage;\r\n","import React, { useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { UserContext } from '../../context/user-context';\r\n\r\nimport './Nav.scss';\r\n\r\nconst Nav = () => {\r\n\tconst { user } = useContext(UserContext);\r\n\r\n\treturn (\r\n\t\t<nav className='nav'>\r\n\t\t\t<div className='nav__menu'>\r\n\t\t\t\t<i className='fas fa-bars'></i>\r\n\t\t\t</div>\r\n\t\t\t<div className='nav__user'>\r\n\t\t\t\t<p>{!user ? 'No user logged in' : `Logged as ${user.name || user.email}`}</p>\r\n\t\t\t\t<Link to='/profile'>\r\n\t\t\t\t\t<i className='fas fa-user'></i>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t</nav>\r\n\t);\r\n};\r\n\r\nexport default Nav;\r\n","import React, { useContext } from 'react';\r\nimport { Redirect, Route } from 'react-router';\r\nimport { UserContext } from '../../context/user-context';\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => {\r\n\tconst { isLoggedIn } = useContext(UserContext);\r\n\r\n\treturn (\r\n\t\t<Route\r\n\t\t\trender={() => {\r\n\t\t\t\tif (!isLoggedIn) {\r\n\t\t\t\t\treturn <Redirect to='/login' />;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn <Component {...rest} />;\r\n\t\t\t\t}\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router';\r\nimport { useFetch } from '../../hooks/useFetch';\r\nimport Button from '../Button/Button';\r\nimport Container from '../Container/Container';\r\n\r\nimport { API_BASE_URL } from '../../constants/api';\r\n\r\nimport './Profile.scss';\r\n\r\nconst Profile = () => {\r\n\tconst [userDetails, setUserDetails] = useState(null);\r\n\tconst location = useLocation();\r\n\r\n\tconst URL = `${API_BASE_URL}user${location.pathname}`;\r\n\r\n\tconst [{ data, error }, getUserDetails] = useFetch();\r\n\r\n\tuseEffect(() => {\r\n\t\tif (error) return;\r\n\r\n\t\tgetUserDetails(URL);\r\n\r\n\t\tif (data?.ok) {\r\n\t\t\tsetUserDetails(data.user);\r\n\t\t}\r\n\t}, [error, getUserDetails, URL, data]);\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div className='profile'>\r\n\t\t\t\t{error}\r\n\t\t\t\t{userDetails && (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h1 className='profile__title'>Profile</h1>\r\n\t\t\t\t\t\t<p className='profile__user'>\r\n\t\t\t\t\t\t\t{userDetails.name || 'NO'} {userDetails.lastName || 'NAME'}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<div className='profile__avatar'>\r\n\t\t\t\t\t\t\t<div className='profile__role'>{userDetails.role[0]}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<p>{userDetails.email}</p>\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t\t<Button title='home' to='/' />\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default Profile;\r\n","import React from 'react';\r\n\r\nimport './Footer.scss';\r\n\r\nconst Footer = () => {\r\n\treturn (\r\n\t\t<div className='footer'>\r\n\t\t\t<p>By Piotr</p>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Footer;\r\n","import React, { useState } from 'react';\r\n\r\nimport Button from '../Button/Button';\r\nimport Container from '../Container/Container';\r\nimport ContentContainer from '../ContentContainer/ContentContainer';\r\nimport Form from '../Form/Form';\r\n\r\nimport './RegistrationPage.scss';\r\n\r\nconst RegistartionPage = () => {\r\n\tconst [registered, setRegistered] = useState(false);\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<ContentContainer>\r\n\t\t\t\t{registered ? (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h2>Hurray you registered successfully</h2>\r\n\t\t\t\t\t\t<Button title='log in' to='/login' />\r\n\t\t\t\t\t</>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<>\r\n\t\t\t\t\t\t<h1>Sign Up</h1>\r\n\t\t\t\t\t\t<Form type='register' callback={setRegistered} />\r\n\t\t\t\t\t</>\r\n\t\t\t\t)}\r\n\t\t\t</ContentContainer>\r\n\t\t\t<Button title='home' to='/' />\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default RegistartionPage;\r\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Home from './components/Home/Home';\nimport LoginPage from './components/LoginPage/LoginPage';\nimport Nav from './components/Nav/Nav';\nimport PrivateRoute from './components/PrivateRoute/PrivateRoute';\nimport Profile from './components/Profile/Profile';\nimport UserProvider from './context/user-context';\nimport Footer from './components/Footer/Footer';\nimport RegistartionPage from './components/RegistrationPage/RegistrationPage';\n\nfunction App() {\n\treturn (\n\t\t<UserProvider>\n\t\t\t<Router basename={process.env.PUBLIC_URL}>\n\t\t\t\t<Nav />\n\t\t\t\t<Switch>\n\t\t\t\t\t<Route exact path='/' component={Home} />\n\t\t\t\t\t<Route path='/login' component={LoginPage} />\n\t\t\t\t\t<Route path='/register' component={RegistartionPage} />\n\t\t\t\t\t<PrivateRoute path='/profile' component={Profile} />\n\t\t\t\t</Switch>\n\t\t\t</Router>\n\t\t\t<Footer />\n\t\t</UserProvider>\n\t);\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}